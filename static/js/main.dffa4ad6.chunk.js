(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,n,t){e.exports=t(27)},22:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),l=t(11),c=t.n(l),a=(t(22),t(3)),i=t(4),u=t(6),s=t(5),d=t(7),f=t(1),k=t(2),m=t(9);function p(){var e=Object(f.a)(["\n  display: grid;\n  padding-left: 120px;\n  width: 80px;\n  grid-template-rows: repeat(6, auto);\n  grid-auto-flow: column;\n"]);return p=function(){return e},e}function v(){var e=Object(f.a)(["\n  border: 1px solid black;\n  width: 20px;\n  height: 20px;\n"]);return v=function(){return e},e}function y(){var e=Object(f.a)(["\n  display: grid;\n  width: 200px;\n  padding-left: 100px;\n  grid-template-rows: repeat(18, auto);\n  grid-auto-flow: column;\n"]);return y=function(){return e},e}var b={blocks:[3840,8738,240,17476],color:"#EFE807"},h={blocks:[17600,36352,25664,3616],color:"#EFE807"},g={blocks:[17504,3712,50240,11776],color:"#EFE807"},E={blocks:[52224,52224,52224,52224],color:"#EFE807"},w={blocks:[1728,35904,27648,17952],color:"#EFE807"},x={blocks:[3648,19520,19968,17984],color:"#EFE807"},B={blocks:[3168,19584,50688,9792],color:"#EFE807"},O=37,S=38,C=39,P=40,j=0,L=1,N=2,F=3,J=0,W=3,G=k.a.div(y()),K=k.a.div(v()),M=k.a.div(p()),U=function(e){function n(e){var t;return Object(a.a)(this,n),(t=Object(u.a)(this,Object(s.a)(n).call(this,e))).courtWidth=10,t.courtHeight=18,t.initCourt=function(){for(var e=[],n=0;n<t.courtWidth;n++){var r=Array.apply(null,Array(t.courtHeight)).map((function(){return null}));e.push(r)}return e},t.state={blocks:t.initCourt(),playing:0,current:{},next:{},pieces:[b,b,b,b,h,h,h,h,g,g,g,g,E,E,E,E,w,w,w,w,x,x,x,x,B,B,B,B],rows:0,remainingBlocks:0},t.randomPiece=function(){var e,n=t.state.pieces;if(0===n.length){var r=[b,b,b,b,h,h,h,h,g,g,g,g,E,E,E,E,w,w,w,w,x,x,x,x,B,B,B,B];t.setState({pieces:r}),e=r.splice(Math.floor(Math.random()*n.length-1),1)[0]}else e=n.splice(Math.floor(Math.random()*n.length-1),1)[0];return{type:e,dir:j,x:2,y:0}},t.setCurrentPiece=function(e){t.setState({current:e||t.randomPiece()})},t.setNextPiece=function(e){t.setState({next:e||t.randomPiece()})},t.play=function(){t.setState({playing:!0}),t.gameTimer=setInterval(t.drop,1e3)},t.stop=function(){t.gameTimer&&clearInterval(t.gameTimer),t.setState({playing:!1})},t.onKeyDown=function(e){if(t.state.playing)switch(e.keyCode){case O:t.keyLeftPressed=!0,t.move(F);break;case C:t.keyLeftPressed=!0,t.move(L);break;case S:t.keyUpPressed=!0,t.rotate();break;case P:t.keydownPressed||(t.keydownPressed=!0,t.drop())}},t.onKeyUp=function(e){switch(e.keyCode){case O:case C:t.keyLeftPressed=!1;break;case S:t.keyUpPressed=!1;break;case P:t.keydownPressed=!1}},t.rotate=function(){var e=t.state.current,n=e.dir===W?J:e.dir+1;t.unoccupied(e.type,e.x,e.y,n)&&t.setState((function(e){return{current:Object(m.a)({},e.current,{dir:n})}}))},t.drop=function(){if(!t.move(N)){var e=0;t.setState((function(n){return{remainingBlocks:e=Math.max(0,n.remainingBlocks-1)}})),t.dropPiece(),t.removeLines(),t.setCurrentPiece(t.state.next),t.setNextPiece(t.randomPiece());var n=t.state.current;(t.occupied(n.type,n.x,n.y,n.dir)||0===e)&&t.stop()}},t.removeLines=function(){var e,n,r,o=0;for(n=t.courtHeight;n>0;--n){for(r=!0,e=0;e<t.courtWidth;++e)t.getBlock(e,n)||(r=!1);r&&(t.removeLine(n),n+=1,o++)}o>0&&t.setState((function(e){return{rows:e.rows+o}}))},t.removeLine=function(e){var n,r;t.setState((function(o){var l=JSON.parse(JSON.stringify(o.blocks));for(r=e;r>=0;r--)for(n=0;n<t.courtWidth;++n)l[n][r]=0===r?null:t.getBlock(n,r-1);return{blocks:l}}))},t.move=function(e){var n=t.state.current,r=n.x,o=n.y;switch(e){case L:r+=1;break;case F:r-=1;break;case N:o+=1}return!!t.unoccupied(n.type,r,o,n.dir)&&(t.setState({current:Object(m.a)({},n,{x:r,y:o})}),!0)},t.occupied=function(e,n,r,o){var l=!1;return t.eachBlock(e,n,r,o,(function(e,n){(e<0||e>=t.courtWidth||n<0||n>=t.courtHeight||t.getBlock(e,n))&&(l=!0)})),l},t.unoccupied=function(e,n,r,o){return!t.occupied(e,n,r,o)},t.eachBlock=function(e,n,t,r,o){var l,c=0,a=0,i=e.blocks[r];for(l=32768;l>0;l>>=1)i&l&&o(n+a,t+c),4===++a&&(a=0,++c)},t.getBlock=function(e,n){return t.state.blocks[e][n]},t.dropPiece=function(){var e=t.state.current;t.eachBlock(e.type,e.x,e.y,e.dir,(function(n,r){t.setBlock(n,r,e.type)}))},t.setBlock=function(e,n,r){t.setState((function(t){var o=JSON.parse(JSON.stringify(t.blocks));return o[e][n]=r,{blocks:o}}))},t.renderNext=function(){var e=t.state.next,n=e.type,r=e.x,l=e.y,c=e.dir,a=[[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null]];return t.eachBlock(n,r,l,c,(function(e,n){a[e][n]="X"})),o.a.createElement(M,null,a.flat().map((function(e,n){return o.a.createElement(K,{key:n,style:null===e?{border:"0px"}:{backgroundColor:"#EFE807"}})})))},t.renderCourt=function(){var e=t.state,n=e.blocks,r=e.current,l=JSON.parse(JSON.stringify(n));if(r){var c=r.type,a=r.x,i=r.y,u=r.dir;t.eachBlock(c,a,i,u,(function(e,n){l[e][n]=c}))}return o.a.createElement(G,null,l.flat().map((function(e,n){return o.a.createElement(K,{key:e+n,style:null===e?{backgroundColor:"#535353"}:{backgroundColor:e.color}})})))},t.addBlocks=function(e){t.setState((function(n){return{remainingBlocks:n.remainingBlocks+e}}))},t.state.current=t.randomPiece(),t.state.next=t.randomPiece(),t}return Object(d.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("keyup",this.onKeyUp,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("keydown",this.onKeyUp,!1)}},{key:"render",value:function(){var e=this,n=this.renderNext(),t=this.renderCourt();console.log("render");var r=this.state,l=r.playing,c=r.rows,a=r.remainingBlocks;return o.a.createElement("div",{style:{width:400},tabIndex:"0"},o.a.createElement("div",null,"Score: ",50*c),o.a.createElement("div",null,"Gemaakte lijnen: ",c),o.a.createElement("div",null,"Resterende blokken: ",a),n,t,o.a.createElement("button",{onClick:this.play,disabled:l||0===a},"Start"),o.a.createElement("button",{onClick:this.stop,disabled:!l},"Stop"),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.addBlocks(1)}},"Geef 1 blok")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.addBlocks(2)}},"Geef 2 blokken")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.addBlocks(3)}},"Geef 3 blokken")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.addBlocks(4)}},"Geef 4 blokken")),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.addBlocks(5)}},"Geef 5 blokken"))))}}]),n}(r.Component);function D(){var e=Object(f.a)(["\n  text-align: center;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  outline: none;\n"]);return D=function(){return e},e}var H=k.a.div(D()),I=function(e){function n(){return Object(a.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(d.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement(H,null,o.a.createElement(U,null))}}]),n}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.dffa4ad6.chunk.js.map